:root{
  --bg:#0b0f16;
  --bg-elev:#0f1520;
  --card:#121a27;
  --text:#e6edf3;
  --muted:#9fb0c1;
  --accent:#6dc5ff;
  --accent-2:#7af3c5;
  --border:rgba(255,255,255,0.08);
  --shadow:0 10px 30px rgba(0,0,0,0.35);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--text);
  background:radial-gradient(1200px 800px at 10% -20%, rgba(109,197,255,0.1), transparent 60%),
             var(--bg);
}

.layout{display:grid; grid-template-columns:280px 1fr; height:100%}
.sidebar{
  border-right:1px solid var(--border);
  background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent 40%), var(--bg-elev);
  padding:24px 16px;
  display:flex; flex-direction:column; gap:16px;
}
.brand{display:flex; align-items:center; gap:12px; padding:4px 8px}
.logo{
  width:36px; height:36px; display:grid; place-items:center; font-weight:800;
  border-radius:10px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#08121a; box-shadow:var(--shadow)
}
.title{font-weight:700; letter-spacing:0.4px}
.nav{display:flex; flex-direction:column; gap:6px; margin-top:8px}
.nav-item{
  display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; color:var(--muted);
  text-decoration:none; transition:all .16s ease; cursor:pointer;
}
.nav-item:hover{background:rgba(255,255,255,0.04); color:var(--text)}
.nav-item.active{background:linear-gradient(180deg, rgba(109,197,255,0.15), rgba(122,243,197,0.12)); color:var(--text); border:1px solid var(--border)}
.spacer{flex:1}
.status{display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border); margin-top:8px}
.dot{width:10px; height:10px; border-radius:50%; background:#888; box-shadow:0 0 10px rgba(0,0,0,0.4)}
.status-text{font-size:12px; color:var(--muted)}

.content{position:relative}
.topbar{display:flex; align-items:center; justify-content:space-between; padding:20px 28px; border-bottom:1px solid var(--border); -webkit-backdrop-filter:saturate(120%) blur(8px); backdrop-filter:saturate(120%) blur(8px)}
.topbar h1{margin:0; font-size:18px}
.btn{
  background:linear-gradient(135deg, rgba(109,197,255,0.2), rgba(122,243,197,0.18));
  color:var(--text); border:1px solid var(--border); padding:10px 14px; border-radius:10px; cursor:pointer;
}
.btn:hover{filter:brightness(1.1)}

.view{display:none; padding:24px 28px}
.view.active{display:block}
.cards{display:grid; grid-template-columns:repeat(auto-fill, minmax(280px,1fr)); gap:16px}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent 40%), var(--card);
  border:1px solid var(--border); border-radius:14px; padding:18px; box-shadow:var(--shadow)
}
.card-title{font-weight:600; margin-bottom:8px}
.metric{display:flex; align-items:baseline; gap:8px; margin:10px 0 6px}
.metric-value{font-size:26px; font-weight:700}
.metric-label{font-size:12px; color:var(--muted)}
.kv{display:grid; gap:6px}
.kv .k{color:var(--muted); min-width:60px} 
.kv .v{font-variant-numeric:tabular-nums}
.status-online{color:#11d67a; font-weight:500}
.status-offline{color:#e05555; font-weight:500}
.links{list-style:none; padding:0; margin:8px 0 0}
.links li{margin:6px 0}
.links a{color:var(--accent); text-decoration:none}
.links a:hover{text-decoration:underline}

.section-header{display:flex; align-items:center; justify-content:space-between; margin-bottom:16px}
.placeholder{color:var(--muted); border:1px dashed var(--border); padding:16px; border-radius:12px; background:rgba(255,255,255,0.02)}

/* Toolbar & inputs */
.toolbar{display:flex; gap:10px; align-items:center; margin:8px 0 16px}
.input{flex:1; background:rgba(255,255,255,0.06); border:1px solid var(--border); color:var(--text); padding:10px 12px; border-radius:10px; outline:none}
.input:focus{border-color:rgba(109,197,255,0.5)}
/* Ensure dark styling applies to selects as well */
select.input{
  -webkit-appearance:none; appearance:none;
  background-color:rgba(255,255,255,0.06);
  color:var(--text);
  border:1px solid var(--border);
  padding-right:28px; /* room for arrow */
}
select.input:focus{border-color:rgba(109,197,255,0.5)}
select.input option{background:var(--bg-elev); color:var(--text)}

/* NPC list */
.npc-layout{display:grid; grid-template-columns:1fr 320px; gap:16px}
.npc-list{display:grid; grid-template-columns:repeat(auto-fill, minmax(220px, 1fr)); gap:12px}
.npc-card{display:flex; gap:12px; align-items:center; padding:12px; border:1px solid var(--border); border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent 40%), var(--card); box-shadow:var(--shadow)}
.npc-card.clickable{cursor:pointer}
.npc-card.selected{outline:2px solid var(--accent)}
.npc-photo{width:56px; height:56px; border-radius:10px; overflow:hidden; background:rgba(30,30,40,0.8); display:grid; place-items:center; border:1px solid var(--border)}
.npc-photo img{width:100%; height:100%; object-fit:contain; display:block}
.npc-meta{display:flex; flex-direction:column; min-width:0}
.npc-name{font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.npc-surname{display:none}
.npc-hptext{font-size:12px; margin-top:4px}
.hp-high{color:#65d18f}
.hp-med{color:#e0c15a}
.hp-low{color:#e05555}
.npc-hp{position:relative; margin-top:6px; width:140px; height:8px; border-radius:6px; background:rgba(255,255,255,0.08); border:1px solid var(--border); overflow:hidden}
.npc-hp-fill{height:100%; background:linear-gradient(90deg, #65d18f, #44b3ff); box-shadow:0 0 8px rgba(68,179,255,0.4) inset}
.npc-hp-label{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:700; color:#e05555; letter-spacing:0.5px; text-shadow:0 1px 2px rgba(0,0,0,0.6); pointer-events:none}
.hp-dead{color:#e05555}

/* KO bar (details page) */
.npc-ko{position:relative; margin-top:8px; width:240px; height:8px; border-radius:6px; background:rgba(255,255,255,0.08); border:1px solid var(--border); overflow:hidden}
.npc-ko-fill{height:100%; background:linear-gradient(90deg, #ffb347, #ffcc33); box-shadow:0 0 8px rgba(255,180,70,0.35) inset}
.npc-ko-label{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:700; color:#ffb347; letter-spacing:0.4px; text-shadow:0 1px 2px rgba(0,0,0,0.5); pointer-events:none}

/* KO bar (list mini) */
.npc-ko-mini{position:relative; margin-top:6px; width:140px; height:6px; border-radius:6px; background:rgba(255,255,255,0.08); border:1px solid var(--border); overflow:hidden}
.npc-ko-fill-mini{height:100%; background:linear-gradient(90deg, #ffb347, #ffcc33)}
.npc-ko-label-mini{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:10px; font-weight:700; color:#ffb347; letter-spacing:0.3px; text-shadow:0 1px 1px rgba(0,0,0,0.5); pointer-events:none}

/* Details panel */
.npc-details{position:sticky; top:20px; align-self:start; border:1px solid var(--border); border-radius:12px; padding:14px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent 40%), var(--card); box-shadow:var(--shadow)}
.npc-details.hidden{display:none}
.npc-details-header{display:flex; gap:12px; align-items:center; margin-bottom:12px}
.npc-details-photo{width:72px; height:72px; border-radius:12px; overflow:hidden; border:1px solid var(--border); background:rgba(30,30,40,0.8); display:grid; place-items:center}
.npc-details-photo img{width:100%; height:100%; object-fit:contain}
.npc-det-name{font-weight:700}
.npc-det-hptext{font-size:14px; margin:4px 0}
.npc-det-hp{width:180px}
.hidden{display:none}

/* NPC full page */
.npc-page{display:grid; grid-template-columns:120px 1fr; gap:16px}
.npc-page .npc-details-photo{width:120px; height:120px}
.npc-page .npc-det-hp{width:240px}
.npc-page .npc-details-body{grid-column:1 / -1; margin-top:16px}

/* NPC detail sections */
.detail-section{margin:16px 0; padding:16px; border:1px solid var(--border); border-radius:12px; background:rgba(255,255,255,0.02)}
.detail-section h3{margin:0 0 12px; font-size:16px; color:var(--accent)}
.detail-row{display:flex; margin:8px 0}
.detail-label{width:100px; color:var(--muted); font-size:14px}
.detail-value{flex:1; font-size:14px}
.dev-actions{display:flex; flex-wrap:wrap; gap:8px}
.dev-actions .btn{flex:0 0 auto}
.dev-status{margin-top:10px; font-size:13px; color:var(--muted)}
.dev-status-info{color:var(--muted)}
.dev-status-ok{color:#11d67a}
.dev-status-error{color:#e05555}

/* Utilities */
.form-row{display:flex; align-items:center; gap:8px}
.form-row.is-zero{display:none}
.row-actions{margin-top:8px; display:flex; gap:8px}
.mt-10{margin-top:10px}
.mt-20{margin-top:20px}

/* Bars */
.bar{position:relative; width:240px; height:8px; border-radius:6px; background:rgba(255,255,255,0.08); border:1px solid var(--border); overflow:hidden}
.bar-fill{height:100%; width:0%; transition:width .2s ease}
.bar-health .bar-fill{background:linear-gradient(90deg, #65d18f, #44b3ff)}
.bar-need .bar-fill{background:linear-gradient(90deg, #ffb347, #ffcc33)}
.bar-status .bar-fill{background:linear-gradient(90deg, #e05555, #ff8a80)}

@media (max-width: 900px){
  .layout{grid-template-columns:1fr}
  .sidebar{position:sticky; top:0; z-index:10; border-right:none; border-bottom:1px solid var(--border); flex-direction:row; align-items:center}
  .nav{flex-direction:row; overflow:auto}
  .status{border-top:none}
  .npc-layout{grid-template-columns:1fr}
  .npc-details{position:relative; top:auto}
  .npc-page{grid-template-columns:1fr}
}
